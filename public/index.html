<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" media="screen,projection">
        <link href="styles.css" rel="stylesheet">

        <script defer src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="salsa20.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jsstore/dist/jsstore.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jsstore/dist/jsstore.worker.min.js"></script>
        <script src="jsStore.js"></script>
        <script src="wasm_exec.js"></script>
        <script>
            const supported = (() => {
                try {
                    if (typeof WebAssembly === 'object' && typeof WebAssembly.instantiate === 'function') {
                        const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00))
                        if (module instanceof WebAssembly.Module)
                            return new WebAssembly.Instance(module) instanceof WebAssembly.Instance
                    }
                } catch (e) {
                }
                return false
            })()

            if (!supported) {
                alert("This won't work without WebAssembly support.")
            }

            const go = new Go()
            if (typeof WebAssembly.instantiateStreaming === 'function') {
                WebAssembly.instantiateStreaming(fetch('main.wasm'), go.importObject)
                    .then(async (result) => {
                        await go.run(result.instance)
                    })
            } else {
                fetch('main.wasm')
                    .then(response => response.arrayBuffer())
                    .then(bytes => WebAssembly.instantiate(bytes, go.importObject))
                    .then(async (result) => {
                        await go.run(result.instance)
                    })
            }
        </script>
        <script src="https://unpkg.com/stage0@0.0.19/dist/index.min.js"></script>
        <script src="https://unpkg.com/stage0@0.0.19/dist/reuseNodes.min.js"></script>
        <script src="https://unpkg.com/stage0@0.0.19/dist/reconcile.min.js"></script>
        <script src="https://unpkg.com/stage0@0.0.19/dist/keyed.min.js"></script>
        <script src="app.js" type="module"></script>

        <title>Alpha | Claws</title>
    </head>
    <body>
        <noscript>
            <strong>This will not work without JavaScript. Please enable it to continue.</strong>
        </noscript>
    </body>
</html>
